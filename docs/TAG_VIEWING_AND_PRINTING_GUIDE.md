# Tag Viewing and Printing Guide

## Overview

After generating an inventory tag, both **office users** and **custodians** can view and print it again at any time from their respective dashboards.

---

## Where to View Tags Again

### For Office Users

**Location:** Office Dashboard

**Navigate to:** Office Panel â†’ **Dashboard**

**Section:** "Verified Assets in Office" table

### For Custodians

**Location:** Custodian Dashboard

**Navigate to:** Custodian Panel â†’ **Dashboard** â†’ **Offices** tab

**Section:** Click on any office to view its assigned inventory tags

---

## How to Print a Tag

### Office Users

1. **Log in as office user** (Department Head)

2. **Go to Office Dashboard**
   - This is the default landing page after login
   - Or click "Dashboard" in the sidebar

3. **Scroll to "Verified Assets in Office" table**
   - This shows all assets your office has verified receipt of

4. **Find the asset** you want to print a tag for

5. **Click the Print icon** (ğŸ–¨ï¸) in the Actions column
   - Blue print icon on hover

6. **Tag modal opens automatically**
   - Shows the same layout as when it was first generated
   - Includes:
     - HCC Logo and Campus Name
     - Asset Name and Office Name
     - Tag Number (barcode format: e.g., `MIS-111125-6730`)
     - Article, Date Acquired, Price, Remarks
     - QR Code (links to asset lookup)
     - Barcode (CODE128 format)

7. **Click "Print" button** in the modal
   - Opens browser print dialog
   - Tag is formatted for printing on label paper

8. **Click "Close"** to exit the modal without printing

### Custodians

1. **Log in as custodian**

2. **Go to Custodian Dashboard**
   - Navigate to dashboard or it's the landing page

3. **Click "Offices" tab** in the main content area
   - This shows all offices in your campus

4. **Click on an office card** to view its assigned assets
   - Modal opens showing all inventory tags for that office

5. **Find the tag** you want to print

6. **Click the "Print" button** next to the tag
   - Blue button with printer icon

7. **Tag modal opens** with the same printable layout

8. **Click "Print"** to print, or "Close" to exit

---

## Tag Lifecycle and Viewing Access

### When Tags Are Available to View

| Stage | Status | Can View Tag? | Location |
|-------|--------|---------------|----------|
| **1. Generated by Custodian** | `Pending Verification` | âœ… Yes | Appears in "Pending Asset Verifications" (no print button yet) |
| **2. Verified by Office** | `Active`, `In Storage`, etc. | âœ… Yes | Appears in "Verified Assets in Office" (print button available) |
| **3. Declined** | `Declined` | âŒ No | Hidden from dashboard |

---

## Printable Tag Layout

The tag includes all necessary information for asset tracking:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [HCC Logo]              HOLY CROSS COLLEGES             â”‚
â”‚                          Sta. Rosa, Nueva Ecija         â”‚
â”‚                                                           â”‚
â”‚                    DESKTOP COMPUTER                      â”‚
â”‚                        MIS Office                        â”‚
â”‚                                                           â”‚
â”‚  Tag No: MIS-111125-6730                    [QR CODE]   â”‚
â”‚  Article: chair                                          â”‚
â”‚  Date Acquired: 11/11/2025                               â”‚
â”‚  Price: â‚±0.00                                            â”‚
â”‚  Remarks: WORKING                                        â”‚
â”‚                                                           â”‚
â”‚                 ||||||||||||||||||||||||||                â”‚
â”‚                 MIS-111125-6730 (barcode)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Additional Actions in Verified Assets Table

Besides printing tags, office users can also:

1. **Set Borrowable Quantity** (ğŸ‘ icon)
   - Make assets available for employee borrowing
   - Set how many units can be borrowed

2. **Update Status** (âœï¸ icon)
   - Change asset status (Active, In Storage, For Repair, Missing)
   - Add remarks about the status change

3. **Print Tag** (ğŸ–¨ï¸ icon)
   - View and print the inventory tag (current feature)

---

## Common Questions

### Q: I didn't print the tag when it was first generated. Can I print it later?

**A:** Yes! Navigate to Office Dashboard â†’ "Verified Assets in Office" â†’ Click the print icon for that asset.

### Q: The tag only shows after I verify the asset, right?

**A:** Correct. Tags appear in "Pending Asset Verifications" first (without print button), then move to "Verified Assets in Office" after you click "Verify Receipt" (with print button).

### Q: Can I print the tag multiple times?

**A:** Yes! You can print the tag as many times as needed. Just click the print icon again.

### Q: What if I'm out of paper when the tag is first generated?

**A:** No problem! The tag is saved in the database. You can print it later from the dashboard whenever you have paper.

### Q: Can I view tags for assets I declined?

**A:** No. Declined assets are hidden from the dashboard. If you need to view a declined tag, contact the custodian.

---

## Technical Details

### Database Storage

Tags are permanently stored in the `inventory_tags` table with all details:

```sql
SELECT * FROM inventory_tags WHERE office_id = ? AND status != 'Declined';
```

### API Endpoint

- **Action:** `get_tag_details_for_print`
- **File:** `office/office_dashboard.php`
- **Method:** POST
- **Parameters:** `tag_id`
- **Security:** Validates that tag belongs to user's office

### Frontend Function

```javascript
openPrintableTagModal(tagId)
```

- Fetches tag details via API
- Generates QR code using QRCode.js
- Generates barcode using JsBarcode
- Displays modal with print button

---

## Workflow Diagram

```
Office Request â†’ Custodian Generates Tag â†’ Tag Created
                                              â†“
                        Office Dashboard: "Pending Asset Verifications"
                                    (Tag visible, no print button)
                                              â†“
                        Office User: Click "Verify Receipt"
                                              â†“
                        Tag Status: Pending â†’ Active
                                              â†“
                        "Verified Assets in Office" table
                                    (Print button available)
                                              â†“
                        Click Print Icon â†’ View/Print Tag Anytime
```

---

## Files Involved

1. **office/office_dashboard.php** (Lines 73-93, 387-655)
   - Backend API endpoint for fetching tag details
   - Frontend printable tag modal
   - Print button in verified assets table

2. **api/inventory_tags.php**
   - Alternative API endpoint for tag details (used by custodian)

3. **database: inventory_tags table**
   - Permanent storage for all tag information

---

## Testing Checklist

### Office User
- [x] Tag appears in pending verifications after generation
- [x] Tag moves to verified assets after verification
- [x] Print button appears in verified assets table
- [x] Clicking print button opens modal with correct tag details
- [x] QR code generates correctly
- [x] Barcode generates correctly
- [x] Print button in modal triggers browser print dialog
- [x] Close button closes modal
- [x] Can print tag multiple times

### Custodian
- [x] Offices tab shows all offices in campus
- [x] Clicking office opens modal with assigned inventory tags
- [x] Print button appears next to each tag
- [x] Clicking print button opens modal with correct tag details
- [x] QR code and barcode generate correctly
- [x] Can print tag multiple times
- [x] Search functionality works in office assets modal

---

## Summary

âœ… **Both office users and custodians** can view and print inventory tags anytime
âœ… **Office users:** Dashboard â†’ "Verified Assets in Office" table â†’ Print icon
âœ… **Custodians:** Dashboard â†’ "Offices" tab â†’ Click office â†’ Print button
âœ… **Same printable layout** with QR code, barcode, and all tag details
âœ… **No restrictions** on how many times a tag can be printed

---

**Implementation Date:** November 11, 2025
**Status:** âœ… Complete - Fully functional for both office users and custodians
**Answer to User Question:**
- **Office users:** Tags can be viewed and printed from Office Dashboard â†’ "Verified Assets in Office" table â†’ Print icon (ğŸ–¨ï¸)
- **Custodians:** Tags can be viewed and printed from Custodian Dashboard â†’ "Offices" tab â†’ Click office â†’ Print button
